{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Ryan/Documents/GitHub/PaperHands/page/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Ryan/Documents/GitHub/PaperHands/page/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Ryan\\\\Documents\\\\GitHub\\\\PaperHands\\\\page\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useContext}from\"react\";import UserContext from\"../../context/UserContext\";import styles from\"../Template/PageTemplate.module.css\";import{Typography,IconButton,Box,Button,TextField,Container,Grid,Card,CardHeader,CardContent}from\"@material-ui/core\";import{motion}from\"framer-motion\";import CloseIcon from\"@material-ui/icons/Close\";import Axios from\"axios\";import config from\"../../config/Config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SaleModal=function SaleModal(_ref){var setSaleOpen=_ref.setSaleOpen,stock=_ref.stock;return/*#__PURE__*/_jsx(motion.div,{className:styles.backdrop,initial:{opacity:0},animate:{opacity:1},id:\"backdrop\",children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(motion.div,{animate:{opacity:1,y:-20},children:/*#__PURE__*/_jsx(SaleModalContent,{setSaleOpen:setSaleOpen,stock:stock})})})});};var SaleModalContent=function SaleModalContent(_ref2){var setSaleOpen=_ref2.setSaleOpen,stock=_ref2.stock;var _useContext=useContext(UserContext),userData=_useContext.userData;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),quantity=_useState2[0],setQuantity=_useState2[1];var handleQuantityChange=function handleQuantityChange(e){if(!isNaN(e.target.value)&&Number(e.target.value)<=stock.quantity){setQuantity(e.target.value);}};var handleClick=function handleClick(){setSaleOpen(false);};var sellStock=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var headers,data,url,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();headers={\"x-auth-token\":userData.token};data={stockId:stock.id,quantity:Number(quantity),userId:userData.user.id,price:Number(stock.currentPrice)};url=config.base_url+\"/api/stock\";_context.next=6;return Axios.patch(url,data,{headers:headers});case 6:response=_context.sent;if(response.data.status===\"success\"){window.location.reload();}case 8:case\"end\":return _context.stop();}}},_callee);}));return function sellStock(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Grid,{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",style:{minHeight:\"100vh\"},children:/*#__PURE__*/_jsx(Box,{width:\"60vh\",boxShadow:1,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{action:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"Close\",onClick:handleClick,children:/*#__PURE__*/_jsx(CloseIcon,{})})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h6\",align:\"center\",children:\"Sell\"}),/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,disabled:true,id:\"name\",label:\"Name\",name:\"Name\",autoComplete:\"Name\",value:stock.name}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,disabled:true,id:\"price\",label:\"Price\",name:\"price\",autoComplete:\"price\",value:stock.currentPrice}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"quantity\",label:\"Quantity\",name:\"quantity\",autoComplete:\"quantity\",value:quantity,onChange:handleQuantityChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:styles.confirm,onClick:sellStock,children:\"Confirm\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})]})})});};export default SaleModal;","map":{"version":3,"sources":["C:/Users/Ryan/Documents/GitHub/PaperHands/page/client/src/components/Dashboard/SaleModal.jsx"],"names":["React","useState","useContext","UserContext","styles","Typography","IconButton","Box","Button","TextField","Container","Grid","Card","CardHeader","CardContent","motion","CloseIcon","Axios","config","SaleModal","setSaleOpen","stock","backdrop","opacity","y","SaleModalContent","userData","quantity","setQuantity","handleQuantityChange","e","isNaN","target","value","Number","handleClick","sellStock","preventDefault","headers","token","data","stockId","id","userId","user","price","currentPrice","url","base_url","patch","response","status","window","location","reload","minHeight","form","name","confirm"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport UserContext from \"../../context/UserContext\";\nimport styles from \"../Template/PageTemplate.module.css\";\nimport {\n  Typography,\n  IconButton,\n  Box,\n  Button,\n  TextField,\n  Container,\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n} from \"@material-ui/core\";\nimport { motion } from \"framer-motion\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Axios from \"axios\";\nimport config from \"../../config/Config\";\n\nconst SaleModal = ({ setSaleOpen, stock }) => {\n  return (\n    <motion.div\n      className={styles.backdrop}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      id=\"backdrop\"\n    >\n      <Container>\n        <motion.div animate={{ opacity: 1, y: -20 }}>\n          <SaleModalContent setSaleOpen={setSaleOpen} stock={stock} />\n        </motion.div>\n      </Container>\n    </motion.div>\n  );\n};\n\nconst SaleModalContent = ({ setSaleOpen, stock }) => {\n  const { userData } = useContext(UserContext);\n  const [quantity, setQuantity] = useState(1);\n\n  const handleQuantityChange = (e) => {\n    if (!isNaN(e.target.value) && Number(e.target.value) <= stock.quantity) {\n      setQuantity(e.target.value);\n    }\n  };\n\n  const handleClick = () => {\n    setSaleOpen(false);\n  };\n\n  const sellStock = async (e) => {\n    e.preventDefault();\n\n    const headers = {\n      \"x-auth-token\": userData.token,\n    };\n\n    const data = {\n      stockId: stock.id,\n      quantity: Number(quantity),\n      userId: userData.user.id,\n      price: Number(stock.currentPrice),\n    };\n\n    const url = config.base_url + `/api/stock`;\n    const response = await Axios.patch(url, data, {\n      headers,\n    });\n\n    if (response.data.status === \"success\") {\n      window.location.reload();\n    }\n  };\n\n  return (\n    <Grid\n      container\n      spacing={0}\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      style={{ minHeight: \"100vh\" }}\n    >\n      <Box width=\"60vh\" boxShadow={1}>\n        <Card>\n          <CardHeader\n            action={\n              <IconButton aria-label=\"Close\" onClick={handleClick}>\n                <CloseIcon />\n              </IconButton>\n            }\n          />\n          <CardContent>\n            <Typography component=\"h1\" variant=\"h6\" align=\"center\">\n              Sell\n            </Typography>\n            <form className={styles.form} onSubmit={(e) => e.preventDefault()}>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                fullWidth\n                disabled\n                id=\"name\"\n                label=\"Name\"\n                name=\"Name\"\n                autoComplete=\"Name\"\n                value={stock.name}\n              />\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                fullWidth\n                disabled\n                id=\"price\"\n                label=\"Price\"\n                name=\"price\"\n                autoComplete=\"price\"\n                value={stock.currentPrice}\n              />\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"quantity\"\n                label=\"Quantity\"\n                name=\"quantity\"\n                autoComplete=\"quantity\"\n                value={quantity}\n                onChange={handleQuantityChange}\n              />\n            </form>\n            <br />\n            <Box display=\"flex\" justifyContent=\"center\">\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                className={styles.confirm}\n                onClick={sellStock}\n              >\n                Confirm\n              </Button>\n            </Box>\n\n            <br />\n            <br />\n          </CardContent>\n        </Card>\n      </Box>\n    </Grid>\n  );\n};\n\nexport default SaleModal;\n"]},"metadata":{},"sourceType":"module"}